<!-- Exercise 1: Form -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Exercice 1</title>
  <link rel="stylesheet" href="../styles/form.css">
</head>
<body>
<div class="grid-container">
  <div class="en-tete">
    <br>Bienvenu,<br>Voici le rendu de l'Exercice 1:
  </div>
  <div class="barre-de-nav">Barre de navigation :
    <p> + Pikachu</p>
    <p> + Falbala</p>
    <p> + Naruto</p>
    <p> + Monkey D. Luffy</p>
    <p> + Homer Simpson</p>
    <p> + Jesus Christ</p>
    <p> + Mario</p>
    <p> + Martin Luther King</p>
    <p> + Supertamp</p>
    <p> + Donald</p>
    <p> + Fred again...</p>
    <p> + To be, or not to be</p>
  </div>
  <div class="contenu">
    <form>
      <p>
        <label for="lastName">Nom:</label>
        <input id="lastName" type="text" autocomplete="family-name" required>
      </p>
      <p>
        <label for="firstName">Pr√©nom:</label>
        <input id="firstName" type="text" autocomplete="given-name" required>
      </p>
      <p>
        <label for="email">Courriel:</label>
        <input id="email" type="email" autocomplete="email" required>
      </p>
      <p>
        <label for="dob">Date de naissance:</label>
        <input id="dob" type="date" onchange="getAge(this.value)" autocomplete="bday" required><br>
        <output id="age"></output>
      </p>
      <p>
        <label for="address">Adresse:</label>
        <input type="text" id="address" autocomplete="street-address" required><br>
      </p>
      <p>
        <label for="postcode">Code Postal:</label>
        <input
          type="text"
          id="postcode"
          pattern="([a-zA-Z]\d){3}"
          title="Le code postal doit &#234tre de la forme &#34A#A #A#&#34"
          autocomplete="postal-code"
          required
        >
        <br>
      </p>
      <div>
        <input type="submit" id="submit" value="Envoyer">
      </div>
    </form>
  </div>
</div>
<script>
  document.getElementById('postcode').addEventListener('focusout', function () {
    this.value = this.value.replace(/\s/g,'');
  })

  function getAge(dateString) {
    if (!dateString) {
      document.getElementById('age').innerHTML = '';
      return;
    }
    const timeNow = new Date();
    const timeBirth = new Date(dateString);
    timeBirth.setMinutes(timeBirth.getMinutes() + timeBirth.getTimezoneOffset());

    const present = parseDate(timeNow);
    const birth = parseDate(timeBirth);
    const age = present.month > birth.month ?
      present.year - birth.year :
      present.day >= birth.day ?
        present.year - birth.year :
        present.year - birth.year - 1;
    document.getElementById('age').innerHTML = '&#194ge: ' + age;
  }

  const parseDate = (date) => {
    return {
      year: date.getFullYear(),
      month: date.getMonth(),
      day: date.getDate(),
    };
  };
</script>
</body>
</html>
